<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Sports club Sign-up</title>
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"
    integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.css" />
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="container">
    <h1 class="brand"><span>Sports</span> Club</h1>
    <div class="wrapper">
      <div class="company-info">
        <h3>Sports club Sign-up</h3>
        <ul>
          <li><i class="fa fa-road"></i> 4344 Something st</li>
          <li><i class="fa fa-phone"></i> (555) 555-5555</li>
          <li><i class="fa fa-envelope"></i> test@sportsclub.test</li>
        </ul>
      </div>
      <div class="contact">
        <h3>Email Us</h3>
        <div class="alert">Biography</div>
        <form id="contactForm">
          <p>
            <label>Name</label>
            <input type="text" name="name" value="" id="name" required>
          </p>
          <p>
            <label>Club ID/ Name</label>
            <input type="text" name="company" value="" id="company">
          </p>
          <p>
            <label>Email Address</label>
            <input type="email" name="email" value="" id="email" required>
          </p>
          <p>
            <label>Phone Number</label>
            <input type="text" name="phone" value="" id="phone">
          </p>
          <p class="full">
            <label>Biography</label>
            <textarea name="biography" rows="5" id=""></textarea>
          </p>
          <p class="full">
          <p>Click on the "Choose File" button to upload a picture:</p>

          <action=" /action_page.php">
            <input type="file" id="myFile" name="filename">

            <button type="submit">Submit</button>
            </p>
        </form>
      </div>
    </div>
  </div>
  <script type="module">

    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.8/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.8/firebase-analytics.js";
    import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/9.6.8/firebase-firestore.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
    apiKey: "AIzaSyAqokPjgpp4dcdwZmXNRBXdaYvayaGGpyg",
    authDomain: "senior-project-4f3bb.firebaseapp.com",
    databaseURL: "https://senior-project-4f3bb-default-rtdb.firebaseio.com",
    projectId: "senior-project-4f3bb",
    storageBucket: "senior-project-4f3bb.appspot.com",
    messagingSenderId: "160860532291",
    appId: "1:160860532291:web:01005a9de5c82beb162ef6",
    measurementId: "G-0BDYPJ0YY4"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const db = getFirestore(app);

    document.getElementById('contactForm').addEventListener('submit', submitForm);
    function submitForm(e) {
      e.preventDefault();
      var name = getInputVal('name');
      var company = getInputVal('company');
      var email = getInputVal('email');
      var phone = getInputVal('phone');
      var biography = getInputVal('biography');
      savebiography(name, company, email, phone, biography);
      document.querySelector('.alert').style.display = 'block';
      setTimeout(function () {
        document.querySelector('.alert').style.display = 'none';
      }, 3000);
      document.getElementById('contactForm').reset();
    }

    async function savebiography(name, company, email, phone, biography) {
      try {
        const docRef = await addDoc(collection(db, "SportsClub"), {
          name: name,
          company: company,
          email: email,
          phone: phone,
          biography: biography
        });
        location.replace("./cloudsecond-Page.html")
        console.log("Document written with ID: ", docRef.id);
      } catch (e) {
        console.error("Error adding document: ", e);
      }
    }

    function getInputVal(id) {
      return document.getElementById(id).value;
    }
  </script>
</body>

</html>
